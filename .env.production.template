# Production Environment Configuration Template
# Copy this file to .env.prod and update with production values

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Use managed PostgreSQL service in production (AWS RDS, Azure Database, etc.)
POSTGRES_HOST=your-postgres-host.region.rds.amazonaws.com
POSTGRES_DB=calories_prod
POSTGRES_USER=calories_prod
POSTGRES_PASSWORD=REPLACE_WITH_STRONG_PASSWORD  # Use secrets manager!

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
# Use managed Redis service in production (AWS ElastiCache, Azure Cache, etc.)
REDIS_URL=redis://your-redis-host.cache.amazonaws.com:6379/0

# ============================================================================
# MODEL PATHS
# ============================================================================
# Models should be mounted from persistent storage
HF_NER_MODEL=/models/ner_hf
INTENT_MODEL_PATH=/models/intent.joblib

# ============================================================================
# DATA PATHS
# ============================================================================
# Data files should be in persistent storage or S3
USDA_FOUND_PATH=/data/USDA_foundation.json
USDA_LEGACY_PATH=/data/USDA_sr_legacy.json
DISHES_XLSX_PATH=/data/dishes.xlsx

# ============================================================================
# LLM CONFIGURATION
# ============================================================================
# Use secrets manager or key vault for API keys!
# NEVER commit actual keys to version control
LLM_API_KEY=${LLM_API_KEY_FROM_SECRETS_MANAGER}  # add key here

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
LOG_LEVEL=INFO
SENTRY_DSN=  # Optional: Sentry for error tracking
PROMETHEUS_PORT=9090  # Optional: Prometheus metrics

# ============================================================================
# SECURITY
# ============================================================================
# Restrict CORS origins in production
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# JWT secret for authentication (if implementing)
JWT_SECRET=${JWT_SECRET_FROM_SECRETS_MANAGER}

# ============================================================================
# PERFORMANCE
# ============================================================================
# Worker processes for uvicorn
WORKERS=4
MAX_CONNECTIONS=1000

# Cache TTL (seconds)
REDIS_CACHE_TTL=3600

# ============================================================================
# FEATURE FLAGS
# ============================================================================
# Enable/disable features
ENABLE_LLM_SUGGESTIONS=true
ENABLE_MISSING_DISH_LOGGING=true
ENABLE_METRICS=true

# ============================================================================
# DEPLOYMENT NOTES
# ============================================================================
# 1. Use secrets manager (AWS Secrets Manager, Azure Key Vault, HashiCorp Vault)
# 2. Never store passwords in plain text
# 3. Rotate credentials regularly
# 4. Use SSL/TLS for all database connections
# 5. Enable database backups
# 6. Monitor logs and metrics
# 7. Set up alerting
# 8. Use CDN for frontend assets
# 9. Enable rate limiting
# 10. Set up health checks and auto-scaling
